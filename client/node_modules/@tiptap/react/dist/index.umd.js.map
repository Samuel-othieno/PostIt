{"version":3,"file":"index.umd.js","sources":["../src/EditorContent.tsx","../src/Editor.ts","../../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js","../../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js","../../../node_modules/use-sync-external-store/shim/index.js","../../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.min.js","../../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js","../../../node_modules/use-sync-external-store/shim/with-selector.js","../src/useEditorState.ts","../src/useEditor.ts","../src/Context.tsx","../src/BubbleMenu.tsx","../src/FloatingMenu.tsx","../src/useReactNodeView.ts","../src/NodeViewContent.tsx","../src/NodeViewWrapper.tsx","../src/ReactRenderer.tsx","../src/ReactNodeViewRenderer.tsx"],"sourcesContent":["import React, {\n  ForwardedRef, forwardRef, HTMLProps, LegacyRef, MutableRefObject,\n} from 'react'\nimport ReactDOM, { flushSync } from 'react-dom'\n\nimport { Editor } from './Editor.js'\nimport { ReactRenderer } from './ReactRenderer.js'\n\nconst mergeRefs = <T extends HTMLDivElement>(\n  ...refs: Array<MutableRefObject<T> | LegacyRef<T> | undefined>\n) => {\n  return (node: T) => {\n    refs.forEach(ref => {\n      if (typeof ref === 'function') {\n        ref(node)\n      } else if (ref) {\n        (ref as MutableRefObject<T | null>).current = node\n      }\n    })\n  }\n}\n\nconst Portals: React.FC<{ renderers: Record<string, ReactRenderer> }> = ({ renderers }) => {\n  return (\n    <>\n      {Object.entries(renderers).map(([key, renderer]) => {\n        return ReactDOM.createPortal(renderer.reactElement, renderer.element, key)\n      })}\n    </>\n  )\n}\n\nexport interface EditorContentProps extends HTMLProps<HTMLDivElement> {\n  editor: Editor | null;\n  innerRef?: ForwardedRef<HTMLDivElement | null>;\n}\n\nexport interface EditorContentState {\n  renderers: Record<string, ReactRenderer>;\n}\n\nexport class PureEditorContent extends React.Component<EditorContentProps, EditorContentState> {\n  editorContentRef: React.RefObject<any>\n\n  initialized: boolean\n\n  constructor(props: EditorContentProps) {\n    super(props)\n    this.editorContentRef = React.createRef()\n    this.initialized = false\n\n    this.state = {\n      renderers: {},\n    }\n  }\n\n  componentDidMount() {\n    this.init()\n  }\n\n  componentDidUpdate() {\n    this.init()\n  }\n\n  init() {\n    const { editor } = this.props\n\n    if (editor && !editor.isDestroyed && editor.options.element) {\n      if (editor.contentComponent) {\n        return\n      }\n\n      const element = this.editorContentRef.current\n\n      element.append(...editor.options.element.childNodes)\n\n      editor.setOptions({\n        element,\n      })\n\n      editor.contentComponent = this\n\n      editor.createNodeViews()\n\n      this.initialized = true\n    }\n  }\n\n  maybeFlushSync(fn: () => void) {\n    // Avoid calling flushSync until the editor is initialized.\n    // Initialization happens during the componentDidMount or componentDidUpdate\n    // lifecycle methods, and React doesn't allow calling flushSync from inside\n    // a lifecycle method.\n    if (this.initialized) {\n      flushSync(fn)\n    } else {\n      fn()\n    }\n  }\n\n  setRenderer(id: string, renderer: ReactRenderer) {\n    this.maybeFlushSync(() => {\n      this.setState(({ renderers }) => ({\n        renderers: {\n          ...renderers,\n          [id]: renderer,\n        },\n      }))\n    })\n  }\n\n  removeRenderer(id: string) {\n    this.maybeFlushSync(() => {\n      this.setState(({ renderers }) => {\n        const nextRenderers = { ...renderers }\n\n        delete nextRenderers[id]\n\n        return { renderers: nextRenderers }\n      })\n    })\n  }\n\n  componentWillUnmount() {\n    const { editor } = this.props\n\n    if (!editor) {\n      return\n    }\n\n    this.initialized = false\n\n    if (!editor.isDestroyed) {\n      editor.view.setProps({\n        nodeViews: {},\n      })\n    }\n\n    editor.contentComponent = null\n\n    if (!editor.options.element.firstChild) {\n      return\n    }\n\n    const newElement = document.createElement('div')\n\n    newElement.append(...editor.options.element.childNodes)\n\n    editor.setOptions({\n      element: newElement,\n    })\n  }\n\n  render() {\n    const { editor, innerRef, ...rest } = this.props\n\n    return (\n      <>\n        <div ref={mergeRefs(innerRef, this.editorContentRef)} {...rest} />\n        {/* @ts-ignore */}\n        <Portals renderers={this.state.renderers} />\n      </>\n    )\n  }\n}\n\n// EditorContent should be re-created whenever the Editor instance changes\nconst EditorContentWithKey = forwardRef<HTMLDivElement, EditorContentProps>(\n  (props: Omit<EditorContentProps, 'innerRef'>, ref) => {\n    const key = React.useMemo(() => {\n      return Math.floor(Math.random() * 0xFFFFFFFF).toString()\n    }, [props.editor])\n\n    // Can't use JSX here because it conflicts with the type definition of Vue's JSX, so use createElement\n    return React.createElement(PureEditorContent, {\n      key,\n      innerRef: ref,\n      ...props,\n    })\n  },\n)\n\nexport const EditorContent = React.memo(EditorContentWithKey)\n","import { Editor as CoreEditor } from '@tiptap/core'\nimport React from 'react'\n\nimport { EditorContentProps, EditorContentState } from './EditorContent.js'\nimport { ReactRenderer } from './ReactRenderer.js'\n\ntype ContentComponent = React.Component<EditorContentProps, EditorContentState> & {\n  setRenderer(id: string, renderer: ReactRenderer): void;\n  removeRenderer(id: string): void;\n}\n\nexport class Editor extends CoreEditor {\n  public contentComponent: ContentComponent | null = null\n}\n","/**\n * @license React\n * use-sync-external-store-shim.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var e=require(\"react\");function h(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var k=\"function\"===typeof Object.is?Object.is:h,l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function q(a,b){var d=b(),f=l({inst:{value:d,getSnapshot:b}}),c=f[0].inst,g=f[1];n(function(){c.value=d;c.getSnapshot=b;r(c)&&g({inst:c})},[a,d,b]);m(function(){r(c)&&g({inst:c});return a(function(){r(c)&&g({inst:c})})},[a]);p(d);return d}\nfunction r(a){var b=a.getSnapshot;a=a.value;try{var d=b();return!k(a,d)}catch(f){return!0}}function t(a,b){return b()}var u=\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement?t:q;exports.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:u;\n","/**\n * @license React\n * use-sync-external-store-shim.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n\n          'use strict';\n\n/* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\nif (\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' &&\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart ===\n    'function'\n) {\n  __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error());\n}\n          var React = require('react');\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x, y) {\n  return x === y && (x !== 0 || 1 / x === 1 / y) || x !== x && y !== y // eslint-disable-line no-self-compare\n  ;\n}\n\nvar objectIs = typeof Object.is === 'function' ? Object.is : is;\n\n// dispatch for CommonJS interop named imports.\n\nvar useState = React.useState,\n    useEffect = React.useEffect,\n    useLayoutEffect = React.useLayoutEffect,\n    useDebugValue = React.useDebugValue;\nvar didWarnOld18Alpha = false;\nvar didWarnUncachedGetSnapshot = false; // Disclaimer: This shim breaks many of the rules of React, and only works\n// because of a very particular set of implementation details and assumptions\n// -- change any one of them and it will break. The most important assumption\n// is that updates are always synchronous, because concurrent rendering is\n// only available in versions of React that also have a built-in\n// useSyncExternalStore API. And we only use this shim when the built-in API\n// does not exist.\n//\n// Do not assume that the clever hacks used by this hook also work in general.\n// The point of this shim is to replace the need for hacks by other libraries.\n\nfunction useSyncExternalStore(subscribe, getSnapshot, // Note: The shim does not use getServerSnapshot, because pre-18 versions of\n// React do not expose a way to check if we're hydrating. So users of the shim\n// will need to track that themselves and return the correct value\n// from `getSnapshot`.\ngetServerSnapshot) {\n  {\n    if (!didWarnOld18Alpha) {\n      if (React.startTransition !== undefined) {\n        didWarnOld18Alpha = true;\n\n        error('You are using an outdated, pre-release alpha of React 18 that ' + 'does not support useSyncExternalStore. The ' + 'use-sync-external-store shim will not work correctly. Upgrade ' + 'to a newer pre-release.');\n      }\n    }\n  } // Read the current snapshot from the store on every render. Again, this\n  // breaks the rules of React, and only works here because of specific\n  // implementation details, most importantly that updates are\n  // always synchronous.\n\n\n  var value = getSnapshot();\n\n  {\n    if (!didWarnUncachedGetSnapshot) {\n      var cachedValue = getSnapshot();\n\n      if (!objectIs(value, cachedValue)) {\n        error('The result of getSnapshot should be cached to avoid an infinite loop');\n\n        didWarnUncachedGetSnapshot = true;\n      }\n    }\n  } // Because updates are synchronous, we don't queue them. Instead we force a\n  // re-render whenever the subscribed state changes by updating an some\n  // arbitrary useState hook. Then, during render, we call getSnapshot to read\n  // the current value.\n  //\n  // Because we don't actually use the state returned by the useState hook, we\n  // can save a bit of memory by storing other stuff in that slot.\n  //\n  // To implement the early bailout, we need to track some things on a mutable\n  // object. Usually, we would put that in a useRef hook, but we can stash it in\n  // our useState hook instead.\n  //\n  // To force a re-render, we call forceUpdate({inst}). That works because the\n  // new object always fails an equality check.\n\n\n  var _useState = useState({\n    inst: {\n      value: value,\n      getSnapshot: getSnapshot\n    }\n  }),\n      inst = _useState[0].inst,\n      forceUpdate = _useState[1]; // Track the latest getSnapshot function with a ref. This needs to be updated\n  // in the layout phase so we can access it during the tearing check that\n  // happens on subscribe.\n\n\n  useLayoutEffect(function () {\n    inst.value = value;\n    inst.getSnapshot = getSnapshot; // Whenever getSnapshot or subscribe changes, we need to check in the\n    // commit phase if there was an interleaved mutation. In concurrent mode\n    // this can happen all the time, but even in synchronous mode, an earlier\n    // effect may have mutated the store.\n\n    if (checkIfSnapshotChanged(inst)) {\n      // Force a re-render.\n      forceUpdate({\n        inst: inst\n      });\n    }\n  }, [subscribe, value, getSnapshot]);\n  useEffect(function () {\n    // Check for changes right before subscribing. Subsequent changes will be\n    // detected in the subscription handler.\n    if (checkIfSnapshotChanged(inst)) {\n      // Force a re-render.\n      forceUpdate({\n        inst: inst\n      });\n    }\n\n    var handleStoreChange = function () {\n      // TODO: Because there is no cross-renderer API for batching updates, it's\n      // up to the consumer of this library to wrap their subscription event\n      // with unstable_batchedUpdates. Should we try to detect when this isn't\n      // the case and print a warning in development?\n      // The store changed. Check if the snapshot changed since the last time we\n      // read from the store.\n      if (checkIfSnapshotChanged(inst)) {\n        // Force a re-render.\n        forceUpdate({\n          inst: inst\n        });\n      }\n    }; // Subscribe to the store and return a clean-up function.\n\n\n    return subscribe(handleStoreChange);\n  }, [subscribe]);\n  useDebugValue(value);\n  return value;\n}\n\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  var prevValue = inst.value;\n\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(prevValue, nextValue);\n  } catch (error) {\n    return true;\n  }\n}\n\nfunction useSyncExternalStore$1(subscribe, getSnapshot, getServerSnapshot) {\n  // Note: The shim does not use getServerSnapshot, because pre-18 versions of\n  // React do not expose a way to check if we're hydrating. So users of the shim\n  // will need to track that themselves and return the correct value\n  // from `getSnapshot`.\n  return getSnapshot();\n}\n\nvar canUseDOM = !!(typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined');\n\nvar isServerEnvironment = !canUseDOM;\n\nvar shim = isServerEnvironment ? useSyncExternalStore$1 : useSyncExternalStore;\nvar useSyncExternalStore$2 = React.useSyncExternalStore !== undefined ? React.useSyncExternalStore : shim;\n\nexports.useSyncExternalStore = useSyncExternalStore$2;\n          /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\nif (\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' &&\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop ===\n    'function'\n) {\n  __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error());\n}\n        \n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.min.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var h=require(\"react\"),n=require(\"use-sync-external-store/shim\");function p(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var q=\"function\"===typeof Object.is?Object.is:p,r=n.useSyncExternalStore,t=h.useRef,u=h.useEffect,v=h.useMemo,w=h.useDebugValue;\nexports.useSyncExternalStoreWithSelector=function(a,b,e,l,g){var c=t(null);if(null===c.current){var f={hasValue:!1,value:null};c.current=f}else f=c.current;c=v(function(){function a(a){if(!c){c=!0;d=a;a=l(a);if(void 0!==g&&f.hasValue){var b=f.value;if(g(b,a))return k=b}return k=a}b=k;if(q(d,a))return b;var e=l(a);if(void 0!==g&&g(b,e))return b;d=a;return k=e}var c=!1,d,k,m=void 0===e?null:e;return[function(){return a(b())},null===m?void 0:function(){return a(m())}]},[b,e,l,g]);var d=r(a,c[0],c[1]);\nu(function(){f.hasValue=!0;f.value=d},[d]);w(d);return d};\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n\n          'use strict';\n\n/* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\nif (\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' &&\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart ===\n    'function'\n) {\n  __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error());\n}\n          var React = require('react');\nvar shim = require('use-sync-external-store/shim');\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x, y) {\n  return x === y && (x !== 0 || 1 / x === 1 / y) || x !== x && y !== y // eslint-disable-line no-self-compare\n  ;\n}\n\nvar objectIs = typeof Object.is === 'function' ? Object.is : is;\n\nvar useSyncExternalStore = shim.useSyncExternalStore;\n\n// for CommonJS interop.\n\nvar useRef = React.useRef,\n    useEffect = React.useEffect,\n    useMemo = React.useMemo,\n    useDebugValue = React.useDebugValue; // Same as useSyncExternalStore, but supports selector and isEqual arguments.\n\nfunction useSyncExternalStoreWithSelector(subscribe, getSnapshot, getServerSnapshot, selector, isEqual) {\n  // Use this to track the rendered snapshot.\n  var instRef = useRef(null);\n  var inst;\n\n  if (instRef.current === null) {\n    inst = {\n      hasValue: false,\n      value: null\n    };\n    instRef.current = inst;\n  } else {\n    inst = instRef.current;\n  }\n\n  var _useMemo = useMemo(function () {\n    // Track the memoized state using closure variables that are local to this\n    // memoized instance of a getSnapshot function. Intentionally not using a\n    // useRef hook, because that state would be shared across all concurrent\n    // copies of the hook/component.\n    var hasMemo = false;\n    var memoizedSnapshot;\n    var memoizedSelection;\n\n    var memoizedSelector = function (nextSnapshot) {\n      if (!hasMemo) {\n        // The first time the hook is called, there is no memoized result.\n        hasMemo = true;\n        memoizedSnapshot = nextSnapshot;\n\n        var _nextSelection = selector(nextSnapshot);\n\n        if (isEqual !== undefined) {\n          // Even if the selector has changed, the currently rendered selection\n          // may be equal to the new selection. We should attempt to reuse the\n          // current value if possible, to preserve downstream memoizations.\n          if (inst.hasValue) {\n            var currentSelection = inst.value;\n\n            if (isEqual(currentSelection, _nextSelection)) {\n              memoizedSelection = currentSelection;\n              return currentSelection;\n            }\n          }\n        }\n\n        memoizedSelection = _nextSelection;\n        return _nextSelection;\n      } // We may be able to reuse the previous invocation's result.\n\n\n      // We may be able to reuse the previous invocation's result.\n      var prevSnapshot = memoizedSnapshot;\n      var prevSelection = memoizedSelection;\n\n      if (objectIs(prevSnapshot, nextSnapshot)) {\n        // The snapshot is the same as last time. Reuse the previous selection.\n        return prevSelection;\n      } // The snapshot has changed, so we need to compute a new selection.\n\n\n      // The snapshot has changed, so we need to compute a new selection.\n      var nextSelection = selector(nextSnapshot); // If a custom isEqual function is provided, use that to check if the data\n      // has changed. If it hasn't, return the previous selection. That signals\n      // to React that the selections are conceptually equal, and we can bail\n      // out of rendering.\n\n      // If a custom isEqual function is provided, use that to check if the data\n      // has changed. If it hasn't, return the previous selection. That signals\n      // to React that the selections are conceptually equal, and we can bail\n      // out of rendering.\n      if (isEqual !== undefined && isEqual(prevSelection, nextSelection)) {\n        return prevSelection;\n      }\n\n      memoizedSnapshot = nextSnapshot;\n      memoizedSelection = nextSelection;\n      return nextSelection;\n    }; // Assigning this to a constant so that Flow knows it can't change.\n\n\n    // Assigning this to a constant so that Flow knows it can't change.\n    var maybeGetServerSnapshot = getServerSnapshot === undefined ? null : getServerSnapshot;\n\n    var getSnapshotWithSelector = function () {\n      return memoizedSelector(getSnapshot());\n    };\n\n    var getServerSnapshotWithSelector = maybeGetServerSnapshot === null ? undefined : function () {\n      return memoizedSelector(maybeGetServerSnapshot());\n    };\n    return [getSnapshotWithSelector, getServerSnapshotWithSelector];\n  }, [getSnapshot, getServerSnapshot, selector, isEqual]),\n      getSelection = _useMemo[0],\n      getServerSelection = _useMemo[1];\n\n  var value = useSyncExternalStore(subscribe, getSelection, getServerSelection);\n  useEffect(function () {\n    inst.hasValue = true;\n    inst.value = value;\n  }, [value]);\n  useDebugValue(value);\n  return value;\n}\n\nexports.useSyncExternalStoreWithSelector = useSyncExternalStoreWithSelector;\n          /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\nif (\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== 'undefined' &&\n  typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop ===\n    'function'\n) {\n  __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error());\n}\n        \n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.min.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { useDebugValue, useEffect, useState } from 'react'\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/shim/with-selector'\n\nimport type { Editor } from './Editor.js'\n\nexport type EditorStateSnapshot<TEditor extends Editor | null = Editor | null> = {\n  editor: TEditor;\n  transactionNumber: number;\n};\nexport type UseEditorStateOptions<\n  TSelectorResult,\n  TEditor extends Editor | null = Editor | null,\n> = {\n  /**\n   * The editor instance.\n   */\n  editor: TEditor;\n  /**\n   * A selector function to determine the value to compare for re-rendering.\n   */\n  selector: (context: EditorStateSnapshot<TEditor>) => TSelectorResult;\n  /**\n   * A custom equality function to determine if the editor should re-render.\n   * @default `(a, b) => a === b`\n   */\n  equalityFn?: (a: TSelectorResult, b: TSelectorResult | null) => boolean;\n};\n\n/**\n * To synchronize the editor instance with the component state,\n * we need to create a separate instance that is not affected by the component re-renders.\n */\nfunction makeEditorStateInstance<TEditor extends Editor | null = Editor | null>(initialEditor: TEditor) {\n  let transactionNumber = 0\n  let lastTransactionNumber = 0\n  let lastSnapshot: EditorStateSnapshot<TEditor> = { editor: initialEditor, transactionNumber: 0 }\n  let editor = initialEditor\n  const subscribers = new Set<() => void>()\n\n  const editorInstance = {\n    /**\n     * Get the current editor instance.\n     */\n    getSnapshot(): EditorStateSnapshot<TEditor> {\n      if (transactionNumber === lastTransactionNumber) {\n        return lastSnapshot\n      }\n      lastTransactionNumber = transactionNumber\n      lastSnapshot = { editor, transactionNumber }\n      return lastSnapshot\n    },\n    /**\n     * Always disable the editor on the server-side.\n     */\n    getServerSnapshot(): EditorStateSnapshot<null> {\n      return { editor: null, transactionNumber: 0 }\n    },\n    /**\n     * Subscribe to the editor instance's changes.\n     */\n    subscribe(callback: () => void) {\n      subscribers.add(callback)\n      return () => {\n        subscribers.delete(callback)\n      }\n    },\n    /**\n     * Watch the editor instance for changes.\n     */\n    watch(nextEditor: Editor | null) {\n      editor = nextEditor as TEditor\n\n      if (editor) {\n        /**\n         * This will force a re-render when the editor state changes.\n         * This is to support things like `editor.can().toggleBold()` in components that `useEditor`.\n         * This could be more efficient, but it's a good trade-off for now.\n         */\n        const fn = () => {\n          transactionNumber += 1\n          subscribers.forEach(callback => callback())\n        }\n\n        const currentEditor = editor\n\n        currentEditor.on('transaction', fn)\n        return () => {\n          currentEditor.off('transaction', fn)\n        }\n      }\n    },\n  }\n\n  return editorInstance\n}\n\nexport function useEditorState<TSelectorResult>(\n  options: UseEditorStateOptions<TSelectorResult, Editor>\n): TSelectorResult;\nexport function useEditorState<TSelectorResult>(\n  options: UseEditorStateOptions<TSelectorResult, Editor | null>\n): TSelectorResult | null;\n\nexport function useEditorState<TSelectorResult>(\n  options: UseEditorStateOptions<TSelectorResult, Editor> | UseEditorStateOptions<TSelectorResult, Editor | null>,\n): TSelectorResult | null {\n  const [editorInstance] = useState(() => makeEditorStateInstance(options.editor))\n\n  // Using the `useSyncExternalStore` hook to sync the editor instance with the component state\n  const selectedState = useSyncExternalStoreWithSelector(\n    editorInstance.subscribe,\n    editorInstance.getSnapshot,\n    editorInstance.getServerSnapshot,\n    options.selector as UseEditorStateOptions<TSelectorResult, Editor | null>['selector'],\n    options.equalityFn,\n  )\n\n  useEffect(() => {\n    return editorInstance.watch(options.editor)\n  }, [options.editor])\n\n  useDebugValue(selectedState)\n\n  return selectedState\n}\n","import { EditorOptions } from '@tiptap/core'\nimport {\n  DependencyList, useDebugValue, useEffect, useRef, useState,\n} from 'react'\n\nimport { Editor } from './Editor.js'\nimport { useEditorState } from './useEditorState.js'\n\nconst isDev = process.env.NODE_ENV !== 'production'\nconst isSSR = typeof window === 'undefined'\nconst isNext = isSSR || Boolean(typeof window !== 'undefined' && (window as any).next)\n\n/**\n * The options for the `useEditor` hook.\n */\nexport type UseEditorOptions = Partial<EditorOptions> & {\n  /**\n   * Whether to render the editor on the first render.\n   * If client-side rendering, set this to `true`.\n   * If server-side rendering, set this to `false`.\n   * @default true\n   */\n  immediatelyRender?: boolean;\n  /**\n   * Whether to re-render the editor on each transaction.\n   * This is legacy behavior that will be removed in future versions.\n   * @default true\n   */\n  shouldRerenderOnTransaction?: boolean;\n};\n\n/**\n * This hook allows you to create an editor instance.\n * @param options The editor options\n * @param deps The dependencies to watch for changes\n * @returns The editor instance\n * @example const editor = useEditor({ extensions: [...] })\n */\nexport function useEditor(\n  options: UseEditorOptions & { immediatelyRender: true },\n  deps?: DependencyList\n): Editor;\n\n/**\n * This hook allows you to create an editor instance.\n * @param options The editor options\n * @param deps The dependencies to watch for changes\n * @returns The editor instance\n * @example const editor = useEditor({ extensions: [...] })\n */\nexport function useEditor(\n  options?: UseEditorOptions,\n  deps?: DependencyList\n): Editor | null;\n\nexport function useEditor(\n  options: UseEditorOptions = {},\n  deps: DependencyList = [],\n): Editor | null {\n  const isMounted = useRef(false)\n  const [editor, setEditor] = useState(() => {\n    if (options.immediatelyRender === undefined) {\n      if (isSSR || isNext) {\n        // TODO in the next major release, we should throw an error here\n        if (isDev) {\n          /**\n           * Throw an error in development, to make sure the developer is aware that tiptap cannot be SSR'd\n           * and that they need to set `immediatelyRender` to `false` to avoid hydration mismatches.\n           */\n          console.warn(\n            'Tiptap Error: SSR has been detected, please set `immediatelyRender` explicitly to `false` to avoid hydration mismatches.',\n          )\n        }\n\n        // Best faith effort in production, run the code in the legacy mode to avoid hydration mismatches and errors in production\n        return null\n      }\n\n      // Default to immediately rendering when client-side rendering\n      return new Editor(options)\n    }\n\n    if (options.immediatelyRender && isSSR && isDev) {\n      // Warn in development, to make sure the developer is aware that tiptap cannot be SSR'd, set `immediatelyRender` to `false` to avoid hydration mismatches.\n      throw new Error(\n        'Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.',\n      )\n    }\n\n    if (options.immediatelyRender) {\n      return new Editor(options)\n    }\n\n    return null\n  })\n\n  useDebugValue(editor)\n\n  // This effect will handle creating/updating the editor instance\n  useEffect(() => {\n    let editorInstance: Editor | null = editor\n\n    if (!editorInstance) {\n      editorInstance = new Editor(options)\n      // instantiate the editor if it doesn't exist\n      // for ssr, this is the first time the editor is created\n      setEditor(editorInstance)\n    } else if (Array.isArray(deps) && deps.length) {\n      // the deps array is used to re-initialize the editor instance\n      editorInstance = new Editor(options)\n\n      setEditor(editorInstance)\n    } else {\n      // if the editor does exist & deps are empty, we don't need to re-initialize the editor\n      // we can fast-path to update the editor options on the existing instance\n      editorInstance.setOptions(options)\n    }\n  }, deps)\n\n  const {\n    onBeforeCreate,\n    onBlur,\n    onCreate,\n    onDestroy,\n    onFocus,\n    onSelectionUpdate,\n    onTransaction,\n    onUpdate,\n    onContentError,\n  } = options\n\n  const onBeforeCreateRef = useRef(onBeforeCreate)\n  const onBlurRef = useRef(onBlur)\n  const onCreateRef = useRef(onCreate)\n  const onDestroyRef = useRef(onDestroy)\n  const onFocusRef = useRef(onFocus)\n  const onSelectionUpdateRef = useRef(onSelectionUpdate)\n  const onTransactionRef = useRef(onTransaction)\n  const onUpdateRef = useRef(onUpdate)\n  const onContentErrorRef = useRef(onContentError)\n\n  // This effect will handle updating the editor instance\n  // when the event handlers change.\n  useEffect(() => {\n    if (!editor) {\n      return\n    }\n\n    if (onBeforeCreate) {\n      editor.off('beforeCreate', onBeforeCreateRef.current)\n      editor.on('beforeCreate', onBeforeCreate)\n\n      onBeforeCreateRef.current = onBeforeCreate\n    }\n\n    if (onBlur) {\n      editor.off('blur', onBlurRef.current)\n      editor.on('blur', onBlur)\n\n      onBlurRef.current = onBlur\n    }\n\n    if (onCreate) {\n      editor.off('create', onCreateRef.current)\n      editor.on('create', onCreate)\n\n      onCreateRef.current = onCreate\n    }\n\n    if (onDestroy) {\n      editor.off('destroy', onDestroyRef.current)\n      editor.on('destroy', onDestroy)\n\n      onDestroyRef.current = onDestroy\n    }\n\n    if (onFocus) {\n      editor.off('focus', onFocusRef.current)\n      editor.on('focus', onFocus)\n\n      onFocusRef.current = onFocus\n    }\n\n    if (onSelectionUpdate) {\n      editor.off('selectionUpdate', onSelectionUpdateRef.current)\n      editor.on('selectionUpdate', onSelectionUpdate)\n\n      onSelectionUpdateRef.current = onSelectionUpdate\n    }\n\n    if (onTransaction) {\n      editor.off('transaction', onTransactionRef.current)\n      editor.on('transaction', onTransaction)\n\n      onTransactionRef.current = onTransaction\n    }\n\n    if (onUpdate) {\n      editor.off('update', onUpdateRef.current)\n      editor.on('update', onUpdate)\n\n      onUpdateRef.current = onUpdate\n    }\n\n    if (onContentError) {\n      editor.off('contentError', onContentErrorRef.current)\n      editor.on('contentError', onContentError)\n\n      onContentErrorRef.current = onContentError\n    }\n  }, [\n    onBeforeCreate,\n    onBlur,\n    onCreate,\n    onDestroy,\n    onFocus,\n    onSelectionUpdate,\n    onTransaction,\n    onUpdate,\n    onContentError,\n    editor,\n  ])\n\n  /**\n   * Destroy the editor instance when the component completely unmounts\n   * As opposed to the cleanup function in the effect above, this will\n   * only be called when the component is removed from the DOM, since it has no deps.\n   * */\n  useEffect(() => {\n    isMounted.current = true\n    return () => {\n      isMounted.current = false\n      if (editor) {\n        // We need to destroy the editor asynchronously to avoid memory leaks\n        // because the editor instance is still being used in the component.\n\n        setTimeout(() => {\n          // re-use the editor instance if it hasn't been destroyed yet\n          // and the component is still mounted\n          // otherwise, asynchronously destroy the editor instance\n          if (!isMounted.current && !editor.isDestroyed) {\n            editor.destroy()\n          }\n        })\n      }\n    }\n  }, [])\n\n  // The default behavior is to re-render on each transaction\n  // This is legacy behavior that will be removed in future versions\n  useEditorState({\n    editor,\n    selector: ({ transactionNumber }) => {\n      if (options.shouldRerenderOnTransaction === false) {\n        // This will prevent the editor from re-rendering on each transaction\n        return null\n      }\n\n      // This will avoid re-rendering on the first transaction when `immediatelyRender` is set to `true`\n      if (options.immediatelyRender && transactionNumber === 0) {\n        return 0\n      }\n      return transactionNumber + 1\n    },\n  })\n\n  return editor\n}\n","import React, { createContext, ReactNode, useContext } from 'react'\n\nimport { Editor } from './Editor.js'\nimport { EditorContent } from './EditorContent.js'\nimport { useEditor, UseEditorOptions } from './useEditor.js'\n\nexport type EditorContextValue = {\n  editor: Editor | null;\n}\n\nexport const EditorContext = createContext<EditorContextValue>({\n  editor: null,\n})\n\nexport const EditorConsumer = EditorContext.Consumer\n\n/**\n * A hook to get the current editor instance.\n */\nexport const useCurrentEditor = () => useContext(EditorContext)\n\nexport type EditorProviderProps = {\n  children?: ReactNode;\n  slotBefore?: ReactNode;\n  slotAfter?: ReactNode;\n} & UseEditorOptions\n\n/**\n * This is the provider component for the editor.\n * It allows the editor to be accessible across the entire component tree\n * with `useCurrentEditor`.\n */\nexport function EditorProvider({\n  children, slotAfter, slotBefore, ...editorOptions\n}: EditorProviderProps) {\n  const editor = useEditor(editorOptions)\n\n  if (!editor) {\n    return null\n  }\n\n  return (\n    <EditorContext.Provider value={{ editor }}>\n      {slotBefore}\n      <EditorConsumer>\n        {({ editor: currentEditor }) => (\n          <EditorContent editor={currentEditor} />\n        )}\n      </EditorConsumer>\n      {children}\n      {slotAfter}\n    </EditorContext.Provider>\n  )\n}\n","import { BubbleMenuPlugin, BubbleMenuPluginProps } from '@tiptap/extension-bubble-menu'\nimport React, { useEffect, useState } from 'react'\n\nimport { useCurrentEditor } from './Context.js'\n\ntype Optional<T, K extends keyof T> = Pick<Partial<T>, K> & Omit<T, K>;\n\nexport type BubbleMenuProps = Omit<Optional<BubbleMenuPluginProps, 'pluginKey'>, 'element' | 'editor'> & {\n  editor: BubbleMenuPluginProps['editor'] | null;\n  className?: string;\n  children: React.ReactNode;\n  updateDelay?: number;\n};\n\nexport const BubbleMenu = (props: BubbleMenuProps) => {\n  const [element, setElement] = useState<HTMLDivElement | null>(null)\n  const { editor: currentEditor } = useCurrentEditor()\n\n  useEffect(() => {\n    if (!element) {\n      return\n    }\n\n    if (props.editor?.isDestroyed || currentEditor?.isDestroyed) {\n      return\n    }\n\n    const {\n      pluginKey = 'bubbleMenu', editor, tippyOptions = {}, updateDelay, shouldShow = null,\n    } = props\n\n    const menuEditor = editor || currentEditor\n\n    if (!menuEditor) {\n      console.warn('BubbleMenu component is not rendered inside of an editor component or does not have editor prop.')\n      return\n    }\n\n    const plugin = BubbleMenuPlugin({\n      updateDelay,\n      editor: menuEditor,\n      element,\n      pluginKey,\n      shouldShow,\n      tippyOptions,\n    })\n\n    menuEditor.registerPlugin(plugin)\n    return () => menuEditor.unregisterPlugin(pluginKey)\n  }, [props.editor, currentEditor, element])\n\n  return (\n    <div ref={setElement} className={props.className} style={{ visibility: 'hidden' }}>\n      {props.children}\n    </div>\n  )\n}\n","import { FloatingMenuPlugin, FloatingMenuPluginProps } from '@tiptap/extension-floating-menu'\nimport React, {\n  useEffect, useState,\n} from 'react'\n\nimport { useCurrentEditor } from './Context.js'\n\ntype Optional<T, K extends keyof T> = Pick<Partial<T>, K> & Omit<T, K>\n\nexport type FloatingMenuProps = Omit<Optional<FloatingMenuPluginProps, 'pluginKey'>, 'element' | 'editor'> & {\n  editor: FloatingMenuPluginProps['editor'] | null;\n  className?: string,\n  children: React.ReactNode\n}\n\nexport const FloatingMenu = (props: FloatingMenuProps) => {\n  const [element, setElement] = useState<HTMLDivElement | null>(null)\n  const { editor: currentEditor } = useCurrentEditor()\n\n  useEffect(() => {\n    if (!element) {\n      return\n    }\n\n    if (props.editor?.isDestroyed || currentEditor?.isDestroyed) {\n      return\n    }\n\n    const {\n      pluginKey = 'floatingMenu',\n      editor,\n      tippyOptions = {},\n      shouldShow = null,\n    } = props\n\n    const menuEditor = editor || currentEditor\n\n    if (!menuEditor) {\n      console.warn('FloatingMenu component is not rendered inside of an editor component or does not have editor prop.')\n      return\n    }\n\n    const plugin = FloatingMenuPlugin({\n      pluginKey,\n      editor: menuEditor,\n      element,\n      tippyOptions,\n      shouldShow,\n    })\n\n    menuEditor.registerPlugin(plugin)\n    return () => menuEditor.unregisterPlugin(pluginKey)\n  }, [\n    props.editor,\n    currentEditor,\n    element,\n  ])\n\n  return (\n    <div ref={setElement} className={props.className} style={{ visibility: 'hidden' }}>\n      {props.children}\n    </div>\n  )\n}\n","import { createContext, useContext } from 'react'\n\nexport interface ReactNodeViewContextProps {\n  onDragStart: (event: DragEvent) => void,\n  nodeViewContentRef: (element: HTMLElement | null) => void,\n}\n\nexport const ReactNodeViewContext = createContext<Partial<ReactNodeViewContextProps>>({\n  onDragStart: undefined,\n})\n\nexport const useReactNodeView = () => useContext(ReactNodeViewContext)\n","import React from 'react'\n\nimport { useReactNodeView } from './useReactNodeView.js'\n\nexport interface NodeViewContentProps {\n  [key: string]: any,\n  as?: React.ElementType,\n}\n\nexport const NodeViewContent: React.FC<NodeViewContentProps> = props => {\n  const Tag = props.as || 'div'\n  const { nodeViewContentRef } = useReactNodeView()\n\n  return (\n    <Tag\n      {...props}\n      ref={nodeViewContentRef}\n      data-node-view-content=\"\"\n      style={{\n        whiteSpace: 'pre-wrap',\n        ...props.style,\n      }}\n    />\n  )\n}\n","import React from 'react'\n\nimport { useReactNodeView } from './useReactNodeView.js'\n\nexport interface NodeViewWrapperProps {\n  [key: string]: any,\n  as?: React.ElementType,\n}\n\nexport const NodeViewWrapper: React.FC<NodeViewWrapperProps> = React.forwardRef((props, ref) => {\n  const { onDragStart } = useReactNodeView()\n  const Tag = props.as || 'div'\n\n  return (\n    <Tag\n      {...props}\n      ref={ref}\n      data-node-view-wrapper=\"\"\n      onDragStart={onDragStart}\n      style={{\n        whiteSpace: 'normal',\n        ...props.style,\n      }}\n    />\n  )\n})\n","import { Editor } from '@tiptap/core'\nimport React from 'react'\n\nimport { Editor as ExtendedEditor } from './Editor.js'\n\n/**\n * Check if a component is a class component.\n * @param Component\n * @returns {boolean}\n */\nfunction isClassComponent(Component: any) {\n  return !!(\n    typeof Component === 'function'\n    && Component.prototype\n    && Component.prototype.isReactComponent\n  )\n}\n\n/**\n * Check if a component is a forward ref component.\n * @param Component\n * @returns {boolean}\n */\nfunction isForwardRefComponent(Component: any) {\n  return !!(\n    typeof Component === 'object'\n    && Component.$$typeof?.toString() === 'Symbol(react.forward_ref)'\n  )\n}\n\nexport interface ReactRendererOptions {\n  /**\n   * The editor instance.\n   * @type {Editor}\n   */\n  editor: Editor,\n\n  /**\n   * The props for the component.\n   * @type {Record<string, any>}\n   * @default {}\n   */\n  props?: Record<string, any>,\n\n  /**\n   * The tag name of the element.\n   * @type {string}\n   * @default 'div'\n   */\n  as?: string,\n\n  /**\n   * The class name of the element.\n   * @type {string}\n   * @default ''\n   * @example 'foo bar'\n   */\n  className?: string,\n\n  /**\n   * The attributes of the element.\n   * @type {Record<string, string>}\n   * @default {}\n   * @example { 'data-foo': 'bar' }\n   */\n  attrs?: Record<string, string>,\n}\n\ntype ComponentType<R, P> =\n  React.ComponentClass<P> |\n  React.FunctionComponent<P> |\n  React.ForwardRefExoticComponent<React.PropsWithoutRef<P> & React.RefAttributes<R>>;\n\n/**\n * The ReactRenderer class. It's responsible for rendering React components inside the editor.\n * @example\n * new ReactRenderer(MyComponent, {\n *   editor,\n *   props: {\n *     foo: 'bar',\n *   },\n *   as: 'span',\n * })\n*/\nexport class ReactRenderer<R = unknown, P = unknown> {\n  id: string\n\n  editor: ExtendedEditor\n\n  component: any\n\n  element: Element\n\n  props: Record<string, any>\n\n  reactElement: React.ReactNode\n\n  ref: R | null = null\n\n  constructor(component: ComponentType<R, P>, {\n    editor,\n    props = {},\n    as = 'div',\n    className = '',\n    attrs,\n  }: ReactRendererOptions) {\n    this.id = Math.floor(Math.random() * 0xFFFFFFFF).toString()\n    this.component = component\n    this.editor = editor as ExtendedEditor\n    this.props = props\n    this.element = document.createElement(as)\n    this.element.classList.add('react-renderer')\n\n    if (className) {\n      this.element.classList.add(...className.split(' '))\n    }\n\n    if (attrs) {\n      Object.keys(attrs).forEach(key => {\n        this.element.setAttribute(key, attrs[key])\n      })\n    }\n\n    this.render()\n  }\n\n  render(): void {\n    const Component = this.component\n    const props = this.props\n\n    if (isClassComponent(Component) || isForwardRefComponent(Component)) {\n      props.ref = (ref: R) => {\n        this.ref = ref\n      }\n    }\n\n    this.reactElement = <Component {...props } />\n\n    this.editor?.contentComponent?.setRenderer(this.id, this)\n  }\n\n  updateProps(props: Record<string, any> = {}): void {\n    this.props = {\n      ...this.props,\n      ...props,\n    }\n\n    this.render()\n  }\n\n  destroy(): void {\n    this.editor?.contentComponent?.removeRenderer(this.id)\n  }\n}\n","import {\n  DecorationWithType,\n  NodeView,\n  NodeViewProps,\n  NodeViewRenderer,\n  NodeViewRendererOptions,\n  NodeViewRendererProps,\n} from '@tiptap/core'\nimport { Node as ProseMirrorNode } from '@tiptap/pm/model'\nimport { Decoration, NodeView as ProseMirrorNodeView } from '@tiptap/pm/view'\nimport React from 'react'\n\nimport { Editor } from './Editor.js'\nimport { ReactRenderer } from './ReactRenderer.js'\nimport { ReactNodeViewContext, ReactNodeViewContextProps } from './useReactNodeView.js'\n\nexport interface ReactNodeViewRendererOptions extends NodeViewRendererOptions {\n  update:\n    | ((props: {\n        oldNode: ProseMirrorNode\n        oldDecorations: Decoration[]\n        newNode: ProseMirrorNode\n        newDecorations: Decoration[]\n        updateProps: () => void\n      }) => boolean)\n    | null\n  as?: string\n  className?: string\n  attrs?: Record<string, string>\n}\n\nclass ReactNodeView extends NodeView<\n  React.FunctionComponent,\n  Editor,\n  ReactNodeViewRendererOptions\n> {\n  renderer!: ReactRenderer\n\n  contentDOMElement!: HTMLElement | null\n\n  mount() {\n    const props: NodeViewProps = {\n      editor: this.editor,\n      node: this.node,\n      decorations: this.decorations,\n      selected: false,\n      extension: this.extension,\n      getPos: () => this.getPos(),\n      updateAttributes: (attributes = {}) => this.updateAttributes(attributes),\n      deleteNode: () => this.deleteNode(),\n    }\n\n    if (!(this.component as any).displayName) {\n      const capitalizeFirstChar = (string: string): string => {\n        return string.charAt(0).toUpperCase() + string.substring(1)\n      }\n\n      this.component.displayName = capitalizeFirstChar(this.extension.name)\n    }\n\n    const ReactNodeViewProvider: React.FunctionComponent = componentProps => {\n      const Component = this.component\n      const onDragStart = this.onDragStart.bind(this)\n      const nodeViewContentRef: ReactNodeViewContextProps['nodeViewContentRef'] = element => {\n        if (element && this.contentDOMElement && element.firstChild !== this.contentDOMElement) {\n          element.appendChild(this.contentDOMElement)\n        }\n      }\n\n      return (\n        <>\n          {/* @ts-ignore */}\n          <ReactNodeViewContext.Provider value={{ onDragStart, nodeViewContentRef }}>\n            {/* @ts-ignore */}\n            <Component {...componentProps} />\n          </ReactNodeViewContext.Provider>\n        </>\n      )\n    }\n\n    ReactNodeViewProvider.displayName = 'ReactNodeView'\n\n    if (this.node.isLeaf) {\n      this.contentDOMElement = null\n    } else if (this.options.contentDOMElementTag) {\n      this.contentDOMElement = document.createElement(this.options.contentDOMElementTag)\n    } else {\n      this.contentDOMElement = document.createElement(this.node.isInline ? 'span' : 'div')\n    }\n\n    if (this.contentDOMElement) {\n      // For some reason the whiteSpace prop is not inherited properly in Chrome and Safari\n      // With this fix it seems to work fine\n      // See: https://github.com/ueberdosis/tiptap/issues/1197\n      this.contentDOMElement.style.whiteSpace = 'inherit'\n    }\n\n    let as = this.node.isInline ? 'span' : 'div'\n\n    if (this.options.as) {\n      as = this.options.as\n    }\n\n    const { className = '' } = this.options\n\n    this.handleSelectionUpdate = this.handleSelectionUpdate.bind(this)\n    this.editor.on('selectionUpdate', this.handleSelectionUpdate)\n\n    this.renderer = new ReactRenderer(ReactNodeViewProvider, {\n      editor: this.editor,\n      props,\n      as,\n      className: `node-${this.node.type.name} ${className}`.trim(),\n      attrs: this.options.attrs,\n    })\n  }\n\n  get dom() {\n    if (\n      this.renderer.element.firstElementChild\n      && !this.renderer.element.firstElementChild?.hasAttribute('data-node-view-wrapper')\n    ) {\n      throw Error('Please use the NodeViewWrapper component for your node view.')\n    }\n\n    return this.renderer.element as HTMLElement\n  }\n\n  get contentDOM() {\n    if (this.node.isLeaf) {\n      return null\n    }\n\n    return this.contentDOMElement\n  }\n\n  handleSelectionUpdate() {\n    const { from, to } = this.editor.state.selection\n\n    if (from <= this.getPos() && to >= this.getPos() + this.node.nodeSize) {\n      if (this.renderer.props.selected) {\n        return\n      }\n\n      this.selectNode()\n    } else {\n      if (!this.renderer.props.selected) {\n        return\n      }\n\n      this.deselectNode()\n    }\n  }\n\n  update(node: ProseMirrorNode, decorations: DecorationWithType[]) {\n    const updateProps = (props?: Record<string, any>) => {\n      this.renderer.updateProps(props)\n    }\n\n    if (node.type !== this.node.type) {\n      return false\n    }\n\n    if (typeof this.options.update === 'function') {\n      const oldNode = this.node\n      const oldDecorations = this.decorations\n\n      this.node = node\n      this.decorations = decorations\n\n      return this.options.update({\n        oldNode,\n        oldDecorations,\n        newNode: node,\n        newDecorations: decorations,\n        updateProps: () => updateProps({ node, decorations }),\n      })\n    }\n\n    if (node === this.node && this.decorations === decorations) {\n      return true\n    }\n\n    this.node = node\n    this.decorations = decorations\n\n    updateProps({ node, decorations })\n\n    return true\n  }\n\n  selectNode() {\n    this.renderer.updateProps({\n      selected: true,\n    })\n    this.renderer.element.classList.add('ProseMirror-selectednode')\n  }\n\n  deselectNode() {\n    this.renderer.updateProps({\n      selected: false,\n    })\n    this.renderer.element.classList.remove('ProseMirror-selectednode')\n  }\n\n  destroy() {\n    this.renderer.destroy()\n    this.editor.off('selectionUpdate', this.handleSelectionUpdate)\n    this.contentDOMElement = null\n  }\n}\n\nexport function ReactNodeViewRenderer(\n  component: any,\n  options?: Partial<ReactNodeViewRendererOptions>,\n): NodeViewRenderer {\n  return (props: NodeViewRendererProps) => {\n    // try to get the parent component\n    // this is important for vue devtools to show the component hierarchy correctly\n    // maybe its `undefined` because <editor-content> isnt rendered yet\n    if (!(props.editor as Editor).contentComponent) {\n      return {}\n    }\n\n    return new ReactNodeView(component, props, options) as unknown as ProseMirrorNodeView\n  }\n}\n"],"names":["flushSync","forwardRef","CoreEditor","require$$0","React","shimModule","require$$1","withSelectorModule","useState","useSyncExternalStoreWithSelector","useEffect","useDebugValue","useRef","createContext","useContext","BubbleMenuPlugin","FloatingMenuPlugin","NodeView"],"mappings":"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","x_google_ignoreList":[2,3,4,5,6,7]}